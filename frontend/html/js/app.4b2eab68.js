(function(e){function t(t){for(var o,s,a=t[0],u=t[1],c=t[2],l=0,d=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},i=[];function s(e){return a.p+"js/"+({}[e]||e)+"."+{"chunk-1e01d261":"6f458378","chunk-2d213709":"68c8fdcf","chunk-33da821b":"2120b4ec","chunk-1681596c":"dac27bc2","chunk-2d2086b7":"84a96bd0","chunk-6b0cb5c8":"6f4d885c"}[e]+".js"}function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=s(e);var c=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var m=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},["login"!=e.$route.name?n("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[e._l(e.left_menu_items,(function(t){return[t.children?n("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.text)+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(n){e.$set(t,"model",n)},expression:"item.model"}},e._l(t.children,(function(t,o){return n("v-list-item",{key:o,attrs:{link:""},on:{click:function(n){return e.itemClick(t)}}},[t.icon?n("v-list-item-action",[n("v-icon",[e._v(e._s(t.icon))])],1):e._e(),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.text)+" ")])],1)],1)})),1):n("v-list-item",{key:t.text,attrs:{link:""},on:{click:function(n){return e.itemClick(t)}}},[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.text)+" ")])],1)],1)]}))],2)],1):e._e(),"login"!=e.$route.name?n("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[n("span",{staticClass:"hidden-sm-and-down"},[e._v("Equipment")])]),n("v-text-field",{staticClass:"hidden-sm-and-down",attrs:{flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search (not working yet)"}}),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("mdi-bell")])],1),n("span",[e._v(" "+e._s(e.$store.getters.username)+" ")])],1):e._e(),n("v-content",[n("router-view")],1),[n("dialog-confirm",{attrs:{title:"Are you sure?",message:e.confirm_message,confirm:e.confirmLogout},model:{value:e.confirm_dialog,callback:function(t){e.confirm_dialog=t},expression:"confirm_dialog"}})]],2)},i=[],s=(n("4de4"),n("caad"),n("b0c0"),n("d3b7"),n("2532"),[{icon:"mdi-router",text:"Devices",route:"devices",requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-lan",text:"Networks",route:"networks",requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-file-chart",text:"Reports",route:"reports",requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-chevron-up","icon-alt":"mdi-chevron-down",text:"Actions",model:!1,children:[{icon:"mdi-import",text:"Import from JSON",route:"import"},{icon:"mdi-export",text:"Export to JSON"}],requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-cog-outline",text:"Settings",route:"settings",requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-account-multiple-outline",text:"Users",route:"users",requires:{isLoggedIn:!0,permission:["write","read"]}},{icon:"mdi-login",text:"Login",route:"login",requires:{isLoggedIn:!1}},{icon:"mdi-exit-run",text:"Logout",requires:{isLoggedIn:!0}}]),a=s,u=n("b2d1"),c={data:function(){return{confirm_dialog:!1,confirm_message:"",drawer:null}},methods:{itemClick:function(e){"Logout"!=e.text?"undefined"!==typeof e.route&&this.$route.name!=e.route&&this.$router.push({name:e.route}):this.logout("Exit from application?")},confirmLogout:function(){var e=this;this.$store.dispatch("logout").then((function(){e.$router.push("/login")})),this.confirm_dialog=!1},logout:function(e){this.confirm_dialog=!0,this.confirm_message=e}},computed:{left_menu_items:function(){var e=this;return a.filter((function(t){return 0==t["requires"]["isLoggedIn"]?!e.$store.getters.isLoggedIn:!!e.$store.getters.permissions.superuser||(!t["requires"]["permission"]||t["requires"]["permission"].includes(e.$store.getters.permissions[t.route]))}))},isLoggedIn:function(){return this.$store.getters.isLoggedIn}},created:function(){var e=this;this.$http.interceptors.response.use(void 0,(function(t){return new Promise((function(){throw 401===t.response.status&&e.$store.dispatch("logout").then((function(){e.$router.push("/login")})),t}))}))},components:{DialogConfirm:u["a"]}},l=c,m=n("2877"),d=Object(m["a"])(l,r,i,!1,null,null,null),p=d.exports,f=(n("45fc"),n("8c4f")),g=(n("ac1f"),n("1276"),n("2f62")),h=n("bc3a"),v=n.n(h);function k(){if(localStorage.getItem("token"))try{return JSON.parse(atob(localStorage.getItem("token").split(".")[1])).permissions}catch(e){return{}}else{if(!sessionStorage.getItem("token"))return{};try{return JSON.parse(atob(sessionStorage.getItem("token").split(".")[1])).permissions}catch(t){return{}}}}o["default"].use(g["a"]);var b=new g["a"].Store({state:{status:"",token:localStorage.getItem("token")||sessionStorage.getItem("token")||"",username:localStorage.getItem("username")||sessionStorage.getItem("username")||"",permissions:k()},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t){e.status="success",e.token=t.token,e.username=t.username,e.permissions=t.permissions},auth_error:function(e){e.status="Server error"},auth_wrong:function(e){e.status="Wrong login or password"},auth_logout:function(e){e.status="",e.token="",e.permissions={}}},actions:{login:function(e,t){var n=e.commit;return new Promise((function(e,o){localStorage.setItem("login",t.login),n("auth_request"),v()({url:"backend/auth",data:t.user_data,method:"POST"}).then((function(r){if("success"!=r.data.result)n("auth_wrong"),localStorage.removeItem("token"),localStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),o("Wrong login or password");else{var i=r.data.token,s=r.data.username,a=JSON.parse(atob(i.split(".")[1]));t.remember?(localStorage.setItem("token",i),localStorage.setItem("username",s)):(sessionStorage.setItem("token",i),sessionStorage.setItem("username",s)),v.a.defaults.headers.common["Authorization"]=i,n("auth_success",{token:i,username:s,permissions:a["permissions"]}),e(r)}})).catch((function(e){n("auth_error"),localStorage.removeItem("token"),localStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),o(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e,n){t("auth_logout"),localStorage.removeItem("token"),localStorage.removeItem("username"),v()({url:"backend/auth",method:"DELETE"}).then((function(t){delete v.a.defaults.headers.common["Authorization"],e(t)})).catch((function(e){n(e)}))}))}},modules:{},getters:{isLoggedIn:function(e){return!!e.token},username:function(e){return e.username},permissions:function(e){return e.permissions}}});o["default"].use(f["a"]);var _=[{path:"/",name:"devices",component:function(){return n.e("chunk-6b0cb5c8").then(n.bind(null,"aa72"))},meta:{requiresAuth:!0}},{path:"/networks",name:"networks",component:function(){return n.e("chunk-2d213709").then(n.bind(null,"ad4d"))},meta:{requiresAuth:!0}},{path:"/import",name:"import",component:function(){return n.e("chunk-1e01d261").then(n.bind(null,"7989"))},meta:{requiresAuth:!0}},{path:"/users",name:"users",component:function(){return Promise.all([n.e("chunk-33da821b"),n.e("chunk-1681596c")]).then(n.bind(null,"ed81"))},meta:{requiresAuth:!0}},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-33da821b"),n.e("chunk-2d2086b7")]).then(n.bind(null,"a55b"))}}],w=new f["a"]({routes:_});w.beforeEach((function(e,t,n){if(e.matched.some((function(e){return e.meta.requiresAuth}))){if(b.getters.isLoggedIn)return void n();n("/login")}else n()}));var S=w,x=(n("5363"),n("ce5b")),y=n.n(x);n("bf40");o["default"].use(y.a,{iconfont:"mdi"}),o["default"].config.productionTip=!1,o["default"].prototype.$http=v.a;var I=localStorage.getItem("token");I&&(o["default"].prototype.$http.defaults.headers.common["Authorization"]=I),new o["default"]({router:S,store:b,vuetify:new y.a,render:function(e){return e(p)}}).$mount("#app")},b2d1:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),n("v-card-text",{domProps:{innerHTML:e._s(e.message)}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v("Yes")]),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.show=!1}}},[e._v("No")])],1)],1)],1)],1)},r=[],i={name:"DialogConfirm",props:{value:Boolean,title:String,message:String,confirm:Function},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},s=i,a=n("2877"),u=Object(a["a"])(s,o,r,!1,null,null,null);t["a"]=u.exports}});
//# sourceMappingURL=app.4b2eab68.js.map